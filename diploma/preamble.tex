\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

% page margin
\usepackage[top=2cm, bottom=2cm, left=2cm, right=2cm]{geometry}

% AMS packages
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}

% floating option for figures
\usepackage{float}

\usepackage{xcolor}

\usepackage{bbm}

\usepackage{fancyhdr}
\pagestyle{fancy}
% modifying page layout using fancyhdr
\fancyhf{}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\renewcommand{\subsectionmark}[1]{\markright{\thesubsection\ #1}}

\rhead{\fancyplain{}{\rightmark }}
\cfoot{\fancyplain{}{\thepage }}

\usepackage{array}
\usepackage{braket}

\makeatletter
\def\env@dmatrix{\hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \extrarowheight=2ex
  \array{*\c@MaxMatrixCols{>{\displaystyle}c}}}

\newenvironment{dmatrix}
  {\env@dmatrix}
  {\endarray\hskip-\arraycolsep}

\newenvironment{bdmatrix}
  {\left[\env@dmatrix}
  {\endmatrix\right]}
\makeatother

\newcommand{\mf}{\mathbf}

\newcommand{\lb}{\left(}
\newcommand{\rb}{\right)}
\newcommand{\lsq}{\left[}
\newcommand{\rsq}{\right]}
\newcommand{\lc}{\left\{}
\newcommand{\rc}{\right\}}

\newcommand{\bbI}{\mathbb{I}}
\newcommand{\bba}{\mathbbm{a}}
\newcommand{\bbA}{\mathbb{A}}
\newcommand{\bbB}{\mathbb{B}}
\newcommand{\bbG}{\mathbb{G}}
\newcommand{\bbM}{\mathbb{M}}
\newcommand{\bbV}{\mathbb{V}}
\newcommand{\bbW}{\mathbb{W}}
\newcommand{\EOmega}{\boldsymbol{\Omega}_{\rm \textbf{e}}}
\newcommand{\mfpe}{\mf{p_e}}
\newcommand{\mfpet}{\mf{p_e^+}}
\newcommand{\mfq}{\mf{q}}
\newcommand{\mfp}{\mf{p}}
\newcommand{\mfJ}{\mf{J}}

\DeclareMathAlphabet{\mymathbb}{U}{BOONDOX-ds}{m}{n}
\newcommand{\bbzero}{\mymathbb{0}}
\newcommand{\bbone}{\mymathbb{1}}

\def\hh{_{\rm H}}

\usepackage[toc]{appendix}

\usepackage{chngcntr}
\usepackage{etoolbox}
\AtBeginEnvironment{subappendices}{%
\chapter*{Appendix}
\addcontentsline{toc}{chapter}{Appendices}
\counterwithin{figure}{section}
\counterwithin{table}{section}
}

\usepackage{mathtools}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%

% Swap the definition of \abs* and \norm*, so that \abs
% and \norm resizes the size of the brackets, and the 
% starred version does not.
\makeatletter
\let\oldabs\abs
\def\abs{\@ifstar{\oldabs}{\oldabs*}}
%
\let\oldnorm\norm
\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}
\makeatother

\newcommand{\bnp}[1]{b_n^{(#1)}}

% hyperlinks for eqref and cite
\usepackage{hyperref}

% indentation in the first paragraph of section or paragraph
\usepackage{indentfirst}

\newcommand{\boltz}{k_\text{b}}
\newcommand{\intty}{\int\limits_{-\infty}^\infty}
\newcommand{\mean}[1]{\langle #1 \rangle}
\newcommand{\bs}{\boldsymbol}
